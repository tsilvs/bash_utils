{
	"Shebang: Bash": {
		"scope": "shellscript",
		"prefix": "!b",
		"body": [
			"#!/usr/bin/env bash"
		],
		"description": "Shebang: Bash"
	},
	"Function: Base": {
		"scope": "shellscript",
		"prefix": "f()",
		"body": [
			"$1() {",
			"\t$2 \"$@\"",
			"\treturn $?",
			"}"
		],
		"description": "Function: Base"
	},
	"Function: Full Feature": {
		"scope": "shellscript",
		"prefix": "func()",
		"description": "Function with all important interface signatures.",
		"body": [
			"${1:function_name}() {",
			"\tlocal deps=(${9:dependencies})",
			"\tfor d in \"${deps[@]}\"; do",
			"\t\tcommand -v \"\\$d\" >/dev/null 2>&1 || {",
			"\t\t\techo \"Error: dependency missing: \\$d\" >&2",
			"\t\t\treturn 127 2>/dev/null || exit 127",
			"\t\t}",
			"\tdone",
			"\tlocal ${2:option}=\"${4:option_default}\"",
			"",
			"\tlocal usage=\"$(cat <<-EOF",
			"\t\tUsage: \\${FUNCNAME[0]} [OPTIONS]",
			"\t\tDescription",
			"\t\t",
			"\t\tOptions:",
			"\t\t\t-option_shorthand, --option BROWSER   option_description (default: option_default)",
			"\t\t\t-h, --help              Show help",
			"\t\t",
			"\t\tExamples:",
			"\t\t\t${FUNCNAME[0]}",
			"\tEOF",
			"\t)\"",
			"",
			"\twhile [[ \\$# -gt 0 ]]; do",
			"\t\tcase \"\\$1\" in",
			"\t\t\t-h|--help) showhelp=1; shift ;;",
			"\t\t\t-${3:option_shorthand}|--${2:option})",
			"\t\t\t\t${2:option}=\"\\$2\"",
			"\t\t\t\tshift 2",
			"\t\t\t\t;;",
			"\t\t\t*)",
			"\t\t\t\t${2:option}=\"\\$1\"",
			"\t\t\t\tshift",
			"\t\t\t\t;;",
			"\t\tesac",
			"\tdone",
			"",
			"\trun_cmd() {",
			"\t\tif (( dryrun )); then",
			"\t\t\techo \"DRY-RUN: $@\"",
			"\t\telse",
			"\t\t\t\"$@\"",
			"\t\tfi",
			"\t}",
			"",
			"\t(( showhelp )) && { echo -e \"${usage}\"; return 0; }",
			"",
			"\tlocal other_option=\"\\${${2:option}:-${4:option_default}}\"",
			"\t",
			"\t[[ ! -z \"\\$other_option\" ]] && { echo \"Error: ${7:error_msg}: \\$other_option\" >&2; return 1; }",
			"\t",
			"\t${8:command_call} \\$other_option",
			"}",
		],
	},
}
